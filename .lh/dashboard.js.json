{
    "sourceFile": "dashboard.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1746652171194,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746653361203,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,8 +82,50 @@\n         });\n       }\n     }\n   }\n+  // --- Render Posts ---\n+function renderPosts(containerId, onlyUserPosts = false) {\n+  const container = document.getElementById(containerId);\n+  if (!container) return;\n+\n+  const posts = JSON.parse(localStorage.getItem('posts')) || [];\n+  const user = JSON.parse(localStorage.getItem('loggedInUser'));\n+\n+  // Filter posts if onlyUserPosts is true, otherwise show all posts\n+  const filteredPosts = onlyUserPosts && user\n+    ? posts.filter(post => post.userEmail === user.email)\n+    : posts;\n+\n+  // If no posts available, show a message\n+  if (filteredPosts.length === 0) {\n+    container.innerHTML = '<p>No posts to display</p>';\n+    return;\n+  }\n+\n+  container.innerHTML = ''; // Clear previous content before rendering new posts\n+\n+  filteredPosts.forEach((post, index) => {\n+    const div = document.createElement('div');\n+    div.className = 'post';\n+\n+    const mediaTag = post.type.startsWith('video') ?\n+      `<video controls width=\"100%\"><source src=\"${post.media}\" type=\"${post.type}\"></video>` :\n+      `<img src=\"${post.media}\" alt=\"\">`;\n+\n+    div.innerHTML = `\n+      <h3>${post.title || 'Untitled'}</h3>\n+      ${mediaTag}\n+      <p>${post.description}</p>\n+      <div class=\"actions\">\n+        <span onclick=\"likePost(${index})\">‚ù§Ô∏è ${post.likes}</span>\n+        <span title=\"Share\">üîó</span>\n+        <span title=\"Save\">üíæ</span>\n+      </div>\n+    `;\n+    container.appendChild(div);\n+  });\n+}\n   \n   // --- Render User Posts ---\n   function renderPosts(containerId, onlyUserPosts = false) {\n     const container = document.getElementById(containerId);\n"
                },
                {
                    "date": 1746653502914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,37 +82,40 @@\n         });\n       }\n     }\n   }\n-  // --- Render Posts ---\n+ // --- Render Posts ---\n function renderPosts(containerId, onlyUserPosts = false) {\n   const container = document.getElementById(containerId);\n   if (!container) return;\n \n-  const posts = JSON.parse(localStorage.getItem('posts')) || [];\n-  const user = JSON.parse(localStorage.getItem('loggedInUser'));\n+  const posts = JSON.parse(localStorage.getItem('posts')) || []; // Retrieve posts from localStorage\n+  const user = JSON.parse(localStorage.getItem('loggedInUser'));  // Get logged-in user (if needed)\n \n-  // Filter posts if onlyUserPosts is true, otherwise show all posts\n+  // If `onlyUserPosts` is true, filter to show only the logged-in user's posts\n   const filteredPosts = onlyUserPosts && user\n     ? posts.filter(post => post.userEmail === user.email)\n     : posts;\n \n-  // If no posts available, show a message\n+  // If no posts found, show a message\n   if (filteredPosts.length === 0) {\n-    container.innerHTML = '<p>No posts to display</p>';\n+    container.innerHTML = '<p>No posts to display.</p>';\n     return;\n   }\n \n-  container.innerHTML = ''; // Clear previous content before rendering new posts\n+  // Clear previous content before rendering new posts\n+  container.innerHTML = '';\n \n   filteredPosts.forEach((post, index) => {\n     const div = document.createElement('div');\n     div.className = 'post';\n \n+    // Display video or image based on the post type\n     const mediaTag = post.type.startsWith('video') ?\n       `<video controls width=\"100%\"><source src=\"${post.media}\" type=\"${post.type}\"></video>` :\n-      `<img src=\"${post.media}\" alt=\"\">`;\n+      `<img src=\"${post.media}\" alt=\"Post Media\">`;\n \n+    // Create HTML structure for each post\n     div.innerHTML = `\n       <h3>${post.title || 'Untitled'}</h3>\n       ${mediaTag}\n       <p>${post.description}</p>\n@@ -121,11 +124,19 @@\n         <span title=\"Share\">üîó</span>\n         <span title=\"Save\">üíæ</span>\n       </div>\n     `;\n+\n+    // Append post to container\n     container.appendChild(div);\n   });\n }\n+\n+// --- Home Page: Display All Posts ---\n+if (document.getElementById('feed')) {\n+  renderPosts('feed', false); // Show all posts on the home page\n+}\n+\n   \n   // --- Render User Posts ---\n   function renderPosts(containerId, onlyUserPosts = false) {\n     const container = document.getElementById(containerId);\n"
                }
            ],
            "date": 1746652171194,
            "name": "Commit-0",
            "content": "// --- Display User Info ---\nfunction displayUserInfo() {\n    const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));\n    if (loggedInUser) {\n      // Display user profile info\n      const usernameEl = document.getElementById('usernameDisplay');\n      const emailEl = document.getElementById('emailDisplay');\n      if (usernameEl) usernameEl.textContent = `${loggedInUser.firstName} ${loggedInUser.lastName}`;\n      if (emailEl) emailEl.textContent = loggedInUser.email;\n  \n      // Display user sign-in history\n      displaySignInHistory();\n      \n      // Display user posts\n      renderPosts('myPosts', true);\n    } else {\n      alert('Please sign in to view your dashboard.');\n      window.location.href = 'signin.html';\n    }\n  }\n  \n  // --- Edit Profile ---\n  function showEditForm() {\n    const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));\n    if (loggedInUser) {\n      document.getElementById('profile-info').style.display = 'none';\n      document.getElementById('edit-profile').style.display = 'block';\n  \n      // Prefill edit form with current profile data\n      document.getElementById('editFirstName').value = loggedInUser.firstName;\n      document.getElementById('editLastName').value = loggedInUser.lastName;\n      document.getElementById('editPhone').value = loggedInUser.phone;\n    }\n  }\n  \n  // Cancel Edit Form\n  function cancelEdit() {\n    document.getElementById('edit-profile').style.display = 'none';\n    document.getElementById('profile-info').style.display = 'block';\n  }\n  \n  // Save Edited Profile Info\n  const editProfileForm = document.getElementById('editProfileForm');\n  if (editProfileForm) {\n    editProfileForm.addEventListener('submit', function (e) {\n      e.preventDefault();\n  \n      const firstName = document.getElementById('editFirstName').value.trim();\n      const lastName = document.getElementById('editLastName').value.trim();\n      const phone = document.getElementById('editPhone').value.trim();\n  \n      // Update the logged-in user's profile in localStorage\n      const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));\n      loggedInUser.firstName = firstName;\n      loggedInUser.lastName = lastName;\n      loggedInUser.phone = phone;\n  \n      localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser));\n      alert('Profile updated successfully!');\n  \n      // Refresh user info\n      displayUserInfo();\n    });\n  }\n  \n  // --- Display Sign-in History ---\n  function displaySignInHistory() {\n    const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));\n    const signInHistory = JSON.parse(localStorage.getItem('signInHistory')) || {};\n  \n    if (loggedInUser && signInHistory[loggedInUser.email]) {\n      const history = signInHistory[loggedInUser.email];\n  \n      const signInHistoryContainer = document.getElementById('signInHistory');\n      if (signInHistoryContainer) {\n        signInHistoryContainer.innerHTML = '<h3>Sign In History</h3>';\n        history.forEach(time => {\n          const div = document.createElement('div');\n          div.className = 'sign-in-record';\n          div.innerHTML = `<p>Signed in at: ${new Date(time).toLocaleString()}</p>`;\n          signInHistoryContainer.appendChild(div);\n        });\n      }\n    }\n  }\n  \n  // --- Render User Posts ---\n  function renderPosts(containerId, onlyUserPosts = false) {\n    const container = document.getElementById(containerId);\n    if (!container) return;\n  \n    const posts = JSON.parse(localStorage.getItem('posts')) || [];\n    const user = JSON.parse(localStorage.getItem('loggedInUser'));\n  \n    const filteredPosts = onlyUserPosts && user\n      ? posts.filter(post => post.userEmail === user.email)\n      : posts;\n  \n    container.innerHTML = '';\n  \n    filteredPosts.forEach(post => {\n      const div = document.createElement('div');\n      div.className = 'post';\n  \n      const mediaTag = post.type.startsWith('video') ?\n        `<video controls width=\"100%\"><source src=\"${post.media}\" type=\"${post.type}\"></video>` :\n        `<img src=\"${post.media}\" alt=\"\">`;\n  \n      div.innerHTML = `\n        <h3>${post.title || 'Untitled'}</h3>\n        ${mediaTag}\n        <p>${post.description}</p>\n      `;\n      container.appendChild(div);\n    });\n  }\n  \n  // --- Run display user info on page load ---\n  displayUserInfo();\n  "
        }
    ]
}